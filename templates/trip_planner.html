{% extends 'base.html' %}
{% block title %}üó∫Ô∏è Trip Planner{% endblock %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<link href="/static/css/maps.css" rel="stylesheet">
<style>
    .place-img {
        width: 100%;
    }
    #place-info-menu {
        display: none;
    }
</style>
{% endblock %}

<!-- NAVBAR -->
{% include 'navbar.html' %}

<!-- BODY START/ FLUID CONTAINER START -->
{% block body %}
<div class="container-fluid">

    <!-- TITLE/TRIP NAME -->
    <div class="row">
        <div id="planner-title">
            <h1>Trip Planner: <span class="trip-name">{{ trip.trip_name }} </span></h1>
        </div> 
    </div>
    
    <!-- TRIP CITY, COUNTRY -->
    <div class="row">
        <div id="trip-place">
            <h3>
                <span id="trip-city">
                    {{ trip.trip_city }}
                </span>, <span id="trip-country">
                    {{ trip.trip_country }}
                </span>
            </h3>
        </div>
    </div>


    <!-- TRAVEL DATES -->
    <div class="row">
        <div class="col-4">
            <div id="trip-dates">
                <h4>
                    {{ trip.start_date.strftime('%b %d %Y') }} - {{ trip.end_date.strftime('%b %d %Y') }}
                </h4>
            </div> 
        </div>
        
        <div class="col-6">
            <div id="search-bar">
                <label for="search-bar">Search for a place:</label>
                <input type="text" id="place-search" name="place-search">
                <input type="submit" id="submit-search" value="Search">   
            </div>
        </div>
    </div>
    
    <!-- HIDDEN VALUE -->
    <input type="hidden" id="trip-id" value="{{ trip.trip_id }}">
    
    
    <!-- MAP and PLACE INFO BOX-->
    <div class="row">
        <div class="col-9">
            <div class="map" id="map"></div>
        </div>
        <div class="col-3">
            <div class="place-data" id="place-data"></div>

            <div id="place-info-menu" >
                  <form id="save-place-db" action="/save-place">
                    <!-- CATEGORY SELECTION -->
                    <select id="category" name="category">
                        <option value="">Choose a place category</option>
                        <option value="breaky">Breakfast spot</option>
                        <option value="lunch">Lunch place</option>
                        <option value="dinner">Dinner spot</option>
                        <option value="streetfood">Street Food or Snack</option>
                        <option value="dessert">Dessert place</option>
                        <option value="cafe">Cafe</option>
                        <option value="night">Nightlife</option>
                        <option value="bar">Bar or pub</option>
                        <option value="train">Train station</option>
                        <option value="shop">Shopping</option>
                        <option value="books">Bookstore or Library</option>
                        <option value="museum">Museum</option>
                        <option value="history">Historical landmark</option>
                        <option value="photo">Photo spot</option>
                        <option value="temple">Temple/shrine/worship</option>
                        <option value="entertain">Entertainment</option>
                        <option value="music">Music venue</option>
                        <option value="bath">Sento/onsen/hotspring</option>
                        <option value="beach">Beach</option>
                        <option value="park">Park</option>
                        <option value="workspace">Workspace</option>
                        <option value="covid">COVID Testing center</option>
                        <option value="misc">Miscellaneous</option>
                    </select> 

                    <!-- SPECIAL NOTES -->
                    <label for="notes">Notes:</label>
                    <input type="text" id="notes" name="notes">

                    <p>
                    </p>
                    <!-- ADD TO ITINERARY -->
                    <select id="in-itinerary" name="in-itinerary">
                        <option value="">Add to itinerary (optional)</option>
                        {% for date in travel_dates %}
                        <option value="{{ date }}">{{ date }}</option>
                        {% endfor %}
                    </select>

                    <!-- HIDDEN ITEMS -->

                    
                    <!-- SUBMIT BUTTON -->
                    <input type="submit" value="Save Place">
                  </form>
                </div>
            <div class="place-results"></div> 
        </div>             
    </div>


<!-- END FLUID CONTAINER -->
</div>

<!-- JS SCRIPT TAGS -->
<script src="/static/js/map.js"></script>
<script async 
src="https://maps.googleapis.com/maps/api/js?key={{ YOUR_API_KEY }}&libraries=places&callback=initMap&v=beta&libraries=marker">
</script>


{% endblock %}